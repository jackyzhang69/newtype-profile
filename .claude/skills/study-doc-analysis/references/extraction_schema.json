{
  "version": "2.2",
  "description": "学习许可文档提取模式 - 支持境内外申请差异 (SDS已于2024-11-08关闭)",
  "last_updated": "2026-01-25",
  "policy_changes": {
    "sds_closure": {
      "date": "2024-11-08",
      "impact": "SDS (Student Direct Stream) permanently closed. All applications now use regular stream.",
      "affected_countries": ["China", "India", "Pakistan", "Philippines", "Vietnam", "Brazil", "Colombia", "Costa Rica", "Peru", "Trinidad and Tobago", "Antigua and Barbuda", "Saint Vincent and the Grenadines", "Morocco", "Senegal"],
      "note": "GIC, tuition prepayment, and language tests are no longer mandatory but still strongly recommended"
    },
    "spp_closure": {
      "date": "2018",
      "impact": "SPP (Student Partners Program) replaced by SDS, now both closed"
    },
    "sps_never_existed": {
      "note": "SPS (Student Partners Stream) never existed - common misconception"
    }
  },
  "application_context": {
    "description": "申请情境决定必需文件和表格类型",
    "contexts": {
      "outside_canada": {
        "id": "OUTSIDE",
        "label": "境外申请 (首次入境)",
        "checklist_form": "IMM 5483",
        "application_form": "IMM 1294",
        "pal_required": true,
        "biometrics": "required_at_vac",
        "current_status_required": false
      },
      "inside_canada_extension": {
        "id": "INSIDE_EXT",
        "label": "境内延期",
        "checklist_form": "IMM 5555",
        "application_form": "IMM 5709",
        "pal_required": false,
        "biometrics": "usually_valid",
        "current_status_required": true
      },
      "inside_canada_initial": {
        "id": "INSIDE_INIT",
        "label": "境内首次申请 (有其他身份)",
        "checklist_form": "IMM 5555",
        "application_form": "IMM 5709",
        "pal_required": true,
        "biometrics": "may_be_required",
        "current_status_required": true
      }
    }
  },
  "document_types": {
    "passport": {
      "id": "PASSPORT",
      "required": true,
      "fields": {
        "full_name": {"type": "string", "required": true},
        "given_name": {"type": "string", "required": true},
        "surname": {"type": "string", "required": true},
        "date_of_birth": {"type": "date", "required": true},
        "nationality": {"type": "string", "required": true},
        "passport_number": {"type": "string", "required": true},
        "issue_date": {"type": "date", "required": true},
        "expiry_date": {"type": "date", "required": true},
        "place_of_birth": {"type": "string", "required": false}
      },
      "validations": [
        {"rule": "expiry_date > program_end_date + 6_months", "severity": "high"},
        {"rule": "expiry_date > application_date", "severity": "fatal"}
      ]
    },
    "letter_of_acceptance": {
      "id": "LOA",
      "required": true,
      "fields": {
        "institution_name": {"type": "string", "required": true},
        "dli_number": {"type": "string", "required": true, "pattern": "^O\\d+$"},
        "program_name": {"type": "string", "required": true},
        "program_level": {"type": "enum", "values": ["certificate", "diploma", "associate", "bachelor", "postgrad_diploma", "master", "phd"], "required": true},
        "start_date": {"type": "date", "required": true},
        "end_date": {"type": "date", "required": true},
        "tuition_per_year": {"type": "number", "required": true},
        "total_tuition": {"type": "number", "required": false},
        "student_id": {"type": "string", "required": false},
        "conditions": {"type": "array", "required": false}
      },
      "validations": [
        {"rule": "dli_number in DLI_LIST", "severity": "fatal"},
        {"rule": "start_date > current_date", "severity": "warning"}
      ]
    },
    "provincial_attestation_letter": {
      "id": "PAL",
      "required": "conditional",
      "condition": "not_exempt",
      "fields": {
        "province": {"type": "string", "required": true},
        "attestation_number": {"type": "string", "required": true},
        "issue_date": {"type": "date", "required": true},
        "expiry_date": {"type": "date", "required": true},
        "student_name": {"type": "string", "required": true},
        "institution": {"type": "string", "required": true},
        "program": {"type": "string", "required": true}
      },
      "validations": [
        {"rule": "expiry_date > current_date", "severity": "fatal"},
        {"rule": "student_name == passport.full_name", "severity": "high"},
        {"rule": "institution == loa.institution_name", "severity": "high"}
      ],
      "exemptions": [
        "master_or_phd_program",
        "k12_student",
        "exchange_student",
        "study_permit_extension_in_canada"
      ]
    },
    "bank_statement": {
      "id": "BANK_STMT",
      "required": true,
      "fields": {
        "account_holder": {"type": "string", "required": true},
        "bank_name": {"type": "string", "required": true},
        "account_number": {"type": "string", "required": true, "mask": true},
        "currency": {"type": "string", "required": true},
        "statement_period_start": {"type": "date", "required": true},
        "statement_period_end": {"type": "date", "required": true},
        "opening_balance": {"type": "number", "required": true},
        "closing_balance": {"type": "number", "required": true},
        "average_balance": {"type": "number", "required": false}
      },
      "validations": [
        {"rule": "statement_period >= 4_months", "severity": "medium"},
        {"rule": "statement_period >= 6_months", "severity": "low", "note": "preferred"},
        {"rule": "closing_balance >= required_funds", "severity": "high"}
      ]
    },
    "bank_certificate": {
      "id": "BANK_CERT",
      "required": true,
      "fields": {
        "account_holder": {"type": "string", "required": true},
        "bank_name": {"type": "string", "required": true},
        "certificate_date": {"type": "date", "required": true},
        "balance": {"type": "number", "required": true},
        "currency": {"type": "string", "required": true},
        "frozen_until": {"type": "date", "required": false}
      },
      "validations": [
        {"rule": "certificate_date within 30_days", "severity": "medium"},
        {"rule": "balance >= required_funds", "severity": "high"}
      ]
    },
    "gic_certificate": {
      "id": "GIC",
      "required": "strongly_recommended",
      "_note": "SDS closed 2024-11-08. GIC no longer mandatory but strongly recommended as proof of funds",
      "fields": {
        "account_holder": {"type": "string", "required": true},
        "bank_name": {"type": "string", "required": true},
        "amount": {"type": "number", "required": true},
        "currency": {"type": "string", "required": true, "value": "CAD"},
        "purchase_date": {"type": "date", "required": true},
        "gic_number": {"type": "string", "required": true}
      },
      "validations": [
        {"rule": "amount >= 20635", "severity": "medium", "_note": "recommended minimum, no longer fatal"},
        {"rule": "bank_name in APPROVED_GIC_BANKS", "severity": "medium"}
      ]
    },
    "language_test": {
      "id": "LANG_TEST",
      "required": "recommended",
      "fields": {
        "test_type": {"type": "enum", "values": ["IELTS_Academic", "IELTS_General", "TOEFL_iBT", "PTE_Academic", "CELPIP", "TEF", "TCF", "Duolingo"], "required": true},
        "test_date": {"type": "date", "required": true},
        "overall_score": {"type": "number", "required": true},
        "listening": {"type": "number", "required": false},
        "reading": {"type": "number", "required": false},
        "writing": {"type": "number", "required": false},
        "speaking": {"type": "number", "required": false},
        "trf_number": {"type": "string", "required": false}
      },
      "validations": [
        {"rule": "test_date within 2_years", "severity": "fatal"},
        {"rule": "overall_score >= 6.0 for IELTS_Academic", "severity": "medium", "_note": "recommended, no longer mandatory since SDS closed"}
      ],
      "_sds_requirements_historical": {
        "_note": "SDS closed 2024-11-08. These were the requirements, now only recommendations",
        "IELTS_Academic": {"overall": 6.0},
        "IELTS_General": {"each_band": 6.0},
        "CELPIP": {"each_band": 7},
        "PTE_Academic": {"overall": 60},
        "TOEFL_iBT": {"overall": 83},
        "TEF_Canada": {"each_skill": "NCLC 7"},
        "TCF_Canada": {"each_skill": "NCLC 7"}
      }
    },
    "study_plan": {
      "id": "STUDY_PLAN",
      "required": "recommended",
      "fields": {
        "word_count": {"type": "number", "required": false},
        "sections": {
          "background": {"present": "boolean"},
          "why_canada": {"present": "boolean"},
          "why_institution": {"present": "boolean"},
          "career_plan": {"present": "boolean"},
          "return_plan": {"present": "boolean"},
          "financial_plan": {"present": "boolean"}
        }
      },
      "quality_indicators": [
        {"check": "specific_details", "weight": 2},
        {"check": "logical_flow", "weight": 2},
        {"check": "genuine_motivation", "weight": 3},
        {"check": "realistic_goals", "weight": 2},
        {"check": "no_immigration_language", "weight": 1}
      ]
    },
    "transcript": {
      "id": "TRANSCRIPT",
      "required": true,
      "fields": {
        "institution": {"type": "string", "required": true},
        "student_name": {"type": "string", "required": true},
        "program": {"type": "string", "required": true},
        "issue_date": {"type": "date", "required": true},
        "gpa": {"type": "number", "required": false},
        "graduation_date": {"type": "date", "required": false},
        "status": {"type": "enum", "values": ["completed", "in_progress", "withdrawn"], "required": true}
      }
    },
    "diploma_degree": {
      "id": "DIPLOMA",
      "required": true,
      "fields": {
        "institution": {"type": "string", "required": true},
        "degree_type": {"type": "string", "required": true},
        "major": {"type": "string", "required": true},
        "graduation_date": {"type": "date", "required": true},
        "student_name": {"type": "string", "required": true}
      }
    },
    "current_status_document": {
      "id": "CURRENT_STATUS",
      "required": "inside_canada_only",
      "description": "境内申请必需 - 证明当前合法身份",
      "fields": {
        "document_type": {
          "type": "enum",
          "values": ["study_permit", "work_permit", "visitor_record", "trp", "other"],
          "required": true
        },
        "document_number": {"type": "string", "required": true},
        "issue_date": {"type": "date", "required": true},
        "expiry_date": {"type": "date", "required": true},
        "status": {
          "type": "enum",
          "values": ["valid", "expired", "implied_status"],
          "required": true
        },
        "conditions": {"type": "array", "required": false},
        "employer_or_institution": {"type": "string", "required": false}
      },
      "validations": [
        {"rule": "expiry_date >= current_date OR status == implied_status", "severity": "fatal", "note": "必须有有效身份或隐含身份"},
        {"rule": "document_type matches application_context", "severity": "high"}
      ],
      "implied_status_rules": {
        "description": "如果当前许可已过期但已提交延期申请，申请人享有隐含身份",
        "conditions": [
          "original_permit_was_valid_when_extension_filed",
          "extension_application_pending"
        ]
      }
    },
    "tuition_payment_receipt": {
      "id": "TUITION_RECEIPT",
      "required": "recommended",
      "description": "学费缴纳证明 - SDS已关闭，不再强制但仍建议提供",
      "_note": "SDS closed 2024-11-08. Tuition prepayment no longer mandatory but demonstrates commitment",
      "fields": {
        "institution": {"type": "string", "required": true},
        "student_name": {"type": "string", "required": true},
        "student_id": {"type": "string", "required": true},
        "payment_date": {"type": "date", "required": true},
        "amount_paid": {"type": "number", "required": true},
        "currency": {"type": "string", "required": true},
        "academic_year": {"type": "string", "required": true},
        "receipt_number": {"type": "string", "required": false}
      },
      "validations": [
        {"rule": "amount_paid >= loa.tuition_per_year", "severity": "medium", "_note": "recommended, no longer mandatory"},
        {"rule": "student_name matches passport.full_name", "severity": "high"}
      ]
    },
    "medical_exam_receipt": {
      "id": "MEDICAL",
      "required": "conditional",
      "description": "体检证明 - 可能在审理过程中被要求",
      "_note": "SDS closed 2024-11-08. Upfront medical no longer mandatory, may be requested during processing",
      "fields": {
        "applicant_name": {"type": "string", "required": true},
        "exam_date": {"type": "date", "required": true},
        "panel_physician": {"type": "string", "required": true},
        "clinic_location": {"type": "string", "required": true},
        "uci_number": {"type": "string", "required": false},
        "e_medical_number": {"type": "string", "required": false}
      },
      "validations": [
        {"rule": "exam_date within 12_months", "severity": "medium"},
        {"rule": "e_medical_number present", "severity": "low"}
      ]
    }
  },
  "checks": [
    "cross_document_identity",
    "purpose_consistency",
    "funds_consistency",
    "ties_consistency",
    "signature_presence",
    "page_completeness",
    "translation_completeness",
    "notarization_validity",
    "application_context_validation",
    "pal_exemption_verification",
    "current_status_validity",
    "enhanced_documents_check"
  ],
  "context_specific_checks": {
    "outside_canada": [
      {"check": "pal_present_if_required", "severity": "fatal"},
      {"check": "biometrics_instruction_present", "severity": "medium"},
      {"check": "visa_office_instructions_followed", "severity": "medium"}
    ],
    "inside_canada": [
      {"check": "current_status_valid_or_implied", "severity": "fatal"},
      {"check": "maintenance_of_status", "severity": "high"},
      {"check": "application_before_expiry_or_within_90_days", "severity": "high"}
    ],
    "_sds_historical": {
      "_note": "SDS closed 2024-11-08. These checks are no longer applicable.",
      "_checks_were": [
        {"check": "gic_amount_minimum_20635", "severity": "was_fatal"},
        {"check": "tuition_fully_paid", "severity": "was_fatal"},
        {"check": "language_score_meets_minimum", "severity": "was_fatal"},
        {"check": "medical_exam_completed_upfront", "severity": "was_high"},
        {"check": "applicant_from_sds_country", "severity": "was_fatal"}
      ]
    },
    "enhanced_documents_recommended": [
      {"check": "gic_present", "severity": "medium", "note": "strongly recommended for proof of funds"},
      {"check": "tuition_paid", "severity": "low", "note": "recommended to show commitment"},
      {"check": "language_score_present", "severity": "medium", "note": "strongly recommended for academic readiness"}
    ]
  },
  "financial_requirements": {
    "base_living_cost": 20635,
    "spouse_addition": 4000,
    "child_addition": 3000,
    "quebec_living_cost": 24000,
    "currency": "CAD",
    "effective_date": "2024-01-01"
  },
  "approved_gic_banks": [
    "Scotiabank",
    "RBC Royal Bank",
    "CIBC",
    "TD Bank",
    "BMO Bank of Montreal",
    "ICICI Bank Canada",
    "SBI Canada Bank"
  ]
}
