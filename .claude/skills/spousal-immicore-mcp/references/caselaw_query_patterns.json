{
  "version": "3.0",
  "description": "配偶担保判例法查询模式，支持 ImmiCore Caselaw Search v3.0 API",
  "api_version": "v3.0",
  "api_endpoint": "POST /api/v1/caselaw/search",
  "_landmark_cases_policy": {
    "description": "Landmark cases 管理策略",
    "policy": "仅列出经 KG 验证的 FC/FCA 权威案例，IAD 案例由 Detective 动态获取",
    "verification_method": "caselaw_authority(citation) - 确认 is_good_law=true",
    "update_frequency": "每季度使用 kg_top_authorities(issue_code='SUB_FAMILY_GENUINENESS') 检查更新",
    "last_verified": "2026-01-25"
  },
  "spousal_specific_queries": {
    "genuineness_cases": {
      "description": "关系真实性相关判例",
      "queries": [
        {
          "id": "rushed_relationship",
          "label": "关系发展仓促",
          "kg_search": {
            "issue_code": "SUB_FAMILY_GENUINENESS",
            "limit": 10
          },
          "keywords": ["short courtship", "quick marriage", "met briefly"],
          "landmark_cases": [
            "Kaur Gill v Canada (Citizenship and Immigration), 2012 FC 1522",
            "Nguyen v Canada (Citizenship and Immigration), 2016 FC 1207"
          ],
          "_authority_verified": {
            "2012 FC 1522": {"cited_by": 1, "is_good_law": true, "citing_case": "2024 FC 1072"},
            "2016 FC 1207": {"cited_by": 2, "is_good_law": true, "citing_cases": ["2025 FC 1933", "2019 FC 374"]}
          },
          "_dynamic_lookup": "kg_top_authorities(issue_code='SUB_FAMILY_GENUINENESS', court='FC', limit=5)"
        },
        {
          "id": "lack_cohabitation",
          "label": "缺乏共同生活证据",
          "kg_search": {
            "issue_code": "SUB_FAMILY_GENUINENESS",
            "limit": 10
          },
          "keywords": ["no cohabitation", "separate residences", "living apart"],
          "landmark_cases": [
            "Nguyen v Canada (Citizenship and Immigration), 2016 FC 1207",
            "Fung v Canada (Citizenship and Immigration), 2019 FC 374"
          ],
          "_authority_verified": {
            "2016 FC 1207": {"cited_by": 2, "is_good_law": true},
            "2019 FC 374": {"cited_by": 2, "is_good_law": true}
          },
          "_dynamic_lookup": "caselaw_optimized_search(query='lack cohabitation spousal', court='fc', target_count=5)"
        },
        {
          "id": "immigration_purpose",
          "label": "移民目的 (IRPR 4(1)(a))",
          "kg_search": {
            "issue_code": "SUB_FAMILY_GENUINENESS",
            "limit": 10
          },
          "keywords": ["primarily for immigration", "IRPR 4(1)(a)", "immigration motive"],
          "landmark_cases": [
            "Kaur Gill v Canada (Citizenship and Immigration), 2012 FC 1522"
          ],
          "_authority_verified": {
            "2012 FC 1522": {"cited_by": 1, "is_good_law": true, "note": "确立 IRPR 4(1) 双重测试 (disjunctive test)"}
          },
          "_dynamic_lookup": "caselaw_keyword_search(query='IRPR 4(1)(a) primarily for immigration', court='fc', top_k=5)"
        }
      ]
    },
    "misrepresentation_cases": {
      "description": "虚假陈述相关判例",
      "queries": [
        {
          "id": "concealed_history",
          "label": "隐瞒婚史/前关系",
          "kg_search": {
            "issue_code": "SUB_MISREP_S40",
            "limit": 10
          },
          "keywords": ["concealed marriage", "undisclosed relationship", "hidden divorce"],
          "landmark_cases": [
            "Nguyen v Canada (Citizenship and Immigration), 2016 FC 1207"
          ],
          "_authority_verified": {
            "2016 FC 1207": {"cited_by": 2, "is_good_law": true}
          },
          "_dynamic_lookup": "kg_top_authorities(issue_code='SUB_MISREP_S40', court='FC', limit=5)"
        },
        {
          "id": "false_documents",
          "label": "虚假文件",
          "kg_search": {
            "issue_code": "SUB_MISREP_S40",
            "limit": 10
          },
          "keywords": ["forged document", "fraudulent certificate", "false evidence"],
          "landmark_cases": [],
          "_note": "Detective 应使用 MCP 动态获取最新案例",
          "_dynamic_lookup": "caselaw_optimized_search(query='forged document spousal sponsorship', court='fc', target_count=5)"
        }
      ]
    },
    "credibility_cases": {
      "description": "可信度问题相关判例",
      "queries": [
        {
          "id": "testimony_contradiction",
          "label": "证词矛盾",
          "kg_search": {
            "issue_code": "SUB_FAMILY_GENUINENESS",
            "limit": 10
          },
          "keywords": ["contradictory testimony", "inconsistent statements", "credibility concerns"],
          "landmark_cases": [
            "Nguyen v Canada (Citizenship and Immigration), 2016 FC 1207"
          ],
          "_authority_verified": {
            "2016 FC 1207": {"cited_by": 2, "is_good_law": true}
          },
          "_dynamic_lookup": "caselaw_optimized_search(query='contradictory testimony spousal sponsorship credibility', court='fc', target_count=5)"
        },
        {
          "id": "lack_knowledge",
          "label": "对配偶不了解",
          "kg_search": {
            "issue_code": "SUB_FAMILY_GENUINENESS",
            "limit": 10
          },
          "keywords": ["limited knowledge", "basic information unknown", "unfamiliar with spouse"],
          "landmark_cases": [],
          "_note": "Detective 应使用 MCP 动态获取最新案例",
          "_dynamic_lookup": "caselaw_optimized_search(query='lack mutual knowledge spousal genuineness', court='fc', target_count=5)"
        }
      ]
    },
    "common_law_cases": {
      "description": "同居伴侣特殊情况判例",
      "queries": [
        {
          "id": "cohabitation_duration",
          "label": "共同居住时间不足",
          "kg_search": {
            "issue_code": "SUB_FAMILY_GENUINENESS",
            "limit": 10
          },
          "keywords": ["12 months cohabitation", "continuous residence", "living together requirement"],
          "landmark_cases": [],
          "_dynamic_lookup": "caselaw_optimized_search(query='common-law 12 months cohabitation requirement', court='fc', target_count=5)"
        },
        {
          "id": "conjugal_relationship",
          "label": "关系性质证明",
          "kg_search": {
            "issue_code": "SUB_FAMILY_GENUINENESS",
            "limit": 10
          },
          "keywords": ["conjugal relationship", "marriage-like", "spousal nature"],
          "landmark_cases": [],
          "_dynamic_lookup": "caselaw_optimized_search(query='conjugal relationship common-law partner', court='fc', target_count=5)"
        }
      ]
    }
  },
  "procedural_queries": {
    "description": "程序性问题查询",
    "queries": [
      {
        "id": "procedural_fairness",
        "label": "程序公平性",
        "kg_search": {
          "issue_code": "PF_OPPORTUNITY_RESPOND",
          "limit": 5
        },
        "keywords": ["procedural fairness", "duty to disclose", "opportunity to respond"],
        "landmark_cases": [
          "Baker v Canada (Minister of Citizenship and Immigration), [1999] 2 SCR 817"
        ],
        "_authority_verified": {
          "Baker [1999] 2 SCR 817": {"cited_by": 154, "is_good_law": true, "note": "程序公平性里程碑案例"}
        }
      },
      {
        "id": "section_4_interpretation",
        "label": "IRPR 第4条解释",
        "kg_search": {
          "issue_code": "SUB_FAMILY_GENUINENESS",
          "limit": 5
        },
        "keywords": ["IRPR 4(1)", "dual test", "or test", "genuineness vs purpose"],
        "landmark_cases": [
          "Kaur Gill v Canada (Citizenship and Immigration), 2012 FC 1522"
        ],
        "_authority_verified": {
          "2012 FC 1522": {"cited_by": 1, "is_good_law": true, "note": "确立 IRPR 4(1)(a) 和 4(1)(b) 是独立测试 (disjunctive)"}
        }
      }
    ]
  },
  "country_specific_queries": {
    "description": "按国家查询 - 使用 MCP 动态获取",
    "high_volume_countries": [
      {
        "country_code": "IND",
        "country_name": "India",
        "common_issues": ["arranged_marriage", "rushed_relationship", "family_involvement"],
        "_dynamic_lookup": "kg_similar_cases(country='IND', issue_codes=['rushed_relationship'], limit=5)"
      },
      {
        "country_code": "CHN",
        "country_name": "China",
        "common_issues": ["age_difference", "communication_evidence", "financial_support"],
        "_dynamic_lookup": "kg_similar_cases(country='CHN', issue_codes=['cohabitation_evidence'], limit=5)"
      },
      {
        "country_code": "PAK",
        "country_name": "Pakistan",
        "common_issues": ["cousin_marriage", "arranged_marriage", "credibility"],
        "_dynamic_lookup": "kg_similar_cases(country='PAK', issue_codes=['credibility'], limit=5)"
      },
      {
        "country_code": "PHL",
        "country_name": "Philippines",
        "common_issues": ["age_difference", "online_relationship", "financial_motive"],
        "_dynamic_lookup": "kg_similar_cases(country='PHL', issue_codes=['immigration_purpose'], limit=5)"
      }
    ]
  },
  "mcp_integration": {
    "tools": {
      "immicore_caselaw_search": {
        "description": "v3.0 统一搜索端点 - RRF 融合 BM25 + Semantic 搜索",
        "endpoint": "POST /api/v1/caselaw/search",
        "parameters": {
          "query": "搜索查询 (必填)",
          "court": "法院过滤: fc/fca/irb",
          "start_date": "判决日期起始 YYYY-MM-DD",
          "end_date": "判决日期结束",
          "must_include": "必须包含的关键词数组",
          "must_not": "排除的关键词数组",
          "top_k": "返回结果数 (默认 10)",
          "fetch_k": "候选池大小 (默认 20)",
          "include_text": "是否返回案例全文 (默认 false)",
          "enhance_with_kg": "是否添加 KG 有效性/权威性信息 (默认 false)",
          "rerank_by_authority": "是否按权威性重排序 (默认 false)",
          "authority_weight": "权威性权重 0-1 (默认 0.3)"
        },
        "response_fields": {
          "citation": "案例引用",
          "style_of_cause": "案例标题",
          "judgment_date": "判决日期",
          "court": "法院",
          "rrf_score": "RRF 融合分数",
          "validity": {
            "is_good_law": "是否仍为有效法律",
            "validity_status": "有效性状态 (GOOD_LAW/OVERRULED/DISTINGUISHED)",
            "warning": "警告信息"
          },
          "authority": {
            "authority_score": "权威性评分 0-1",
            "cited_by_count": "被引用次数",
            "cites_count": "引用次数",
            "authority_rank": "权威性排名"
          }
        },
        "usage_examples": {
          "basic": "immicore_caselaw_search(query='spousal sponsorship genuineness', top_k=10)",
          "with_filters": "immicore_caselaw_search(query='marriage of convenience', court='fc', must_include=['IRPR 4(1)'], start_date='2020-01-01')",
          "with_authority": "immicore_caselaw_search(query='bona fide relationship', enhance_with_kg=true, rerank_by_authority=true)"
        }
      },
      "kg_top_authorities": {
        "description": "获取指定 issue_code 的最高权威案例",
        "usage": "kg_top_authorities(issue_code='SUB_FAMILY_GENUINENESS', court='FC', limit=10)",
        "note": "用于动态更新 landmark_cases，每季度执行一次"
      },
      "caselaw_authority": {
        "description": "验证单个案例的权威性",
        "usage": "caselaw_authority(citation='2012 FC 1522')",
        "note": "返回 cited_by_count, is_good_law, top_citing_cases"
      },
      "kg_similar_cases": {
        "description": "查找相似案例",
        "usage": "kg_similar_cases(country='IND', issue_codes=['rushed_relationship'], limit=5)"
      }
    },
    "search_strategy": {
      "description": "搜索策略建议",
      "for_risk_assessment": {
        "approach": "使用 enhance_with_kg=true 获取案例有效性",
        "reason": "确保引用的案例未被推翻 (overruled)",
        "example": "immicore_caselaw_search(query='rushed relationship short courtship', enhance_with_kg=true, must_include=['genuineness'])"
      },
      "for_defense_strategy": {
        "approach": "使用 rerank_by_authority=true 优先获取权威案例",
        "reason": "权威案例更有说服力",
        "example": "immicore_caselaw_search(query='bona fide marriage evidence', rerank_by_authority=true, authority_weight=0.5)"
      },
      "for_precedent_research": {
        "approach": "使用 must_include 精确过滤",
        "reason": "确保结果包含特定法律条款",
        "example": "immicore_caselaw_search(query='spousal sponsorship', must_include=['IRPR 4(1)(a)', 'primarily for immigration'])"
      }
    },
    "operation_manual_queries": {
      "description": "操作手册查询",
      "relevant_sections": [
        "OP 2 - Processing Members of the Family Class",
        "IP 8 - Spouse or Common-law Partner in Canada Class",
        "ENF 2 - Evaluating Inadmissibility"
      ]
    }
  },
  "query_templates": {
    "risk_assessment": {
      "description": "风险评估时查询模板",
      "v3_template": "immicore_caselaw_search(query='{risk_description}', enhance_with_kg=true, must_include=['{risk_pattern_id}'])",
      "kg_template": "kg_top_authorities(issue_code='SUB_FAMILY_GENUINENESS', limit=5)",
      "note": "v3 API 可检查案例有效性，避免引用已被推翻的案例"
    },
    "defense_strategy": {
      "description": "制定辩护策略时查询成功案例",
      "v3_template": "immicore_caselaw_search(query='{defense_argument}', rerank_by_authority=true, authority_weight=0.5)",
      "kg_template": "kg_search(issue_code='{risk_pattern_id}', outcome='allowed', limit=5)",
      "note": "v3 API 可按权威性排序，优先返回高引用案例"
    },
    "precedent_research": {
      "description": "判例研究",
      "v3_template": "immicore_caselaw_search(query='{legal_issue}', include_text=true, top_k=5)",
      "kg_template": "caselaw_authority(citation='{case_citation}')",
      "note": "v3 API 返回 RRF 融合排序结果"
    },
    "validity_check": {
      "description": "检查案例是否仍为有效法律",
      "v3_template": "caselaw_authority(citation='{case_citation}')",
      "note": "检查 is_good_law 字段确认案例未被推翻"
    }
  }
}
