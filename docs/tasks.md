# 开发任务清单

> 规则：每完成一个阶段，将对应项标记为 `[x]`，然后继续下一阶段。

## 阶段 1：搜索路由与白名单/置信评分
- [x] 1.1 定义搜索策略配置（`search_policy`）与来源白名单结构
- [x] 1.2 实现 Search Router（MCP 优先、外网受限、置信评分）
- [x] 1.3 在 Detective/Strategist 中加入来源等级标注要求
- [x] 1.4 增加配置校验与默认值

## 阶段 2：Agent → Skill 绑定
- [x] 2.1 定义技能绑定规则（每个 Agent 需要的 Skill 清单）
- [x] 2.2 在配置或 Agent Prompt 中显式声明 Skill 约束
- [x] 2.3 增加技能加载与解析验证

## 阶段 3：知识一致性校验机制
- [x] 3.1 定义校验规则（apps/<app>/agents + knowledge 必须齐全）
- [x] 3.2 实现轻量校验脚本或运行时检查
- [x] 3.3 输出可读错误提示与修复建议

## 阶段 4：KG 工具与搜索守卫
- [x] 4.1 增加 KG API 工具（search/case/similar/judge stats）
- [x] 4.2 启用 audit-search-guard（白名单与策略强制）
- [x] 4.3 为来源置信度提供输出模板

## 阶段 5：质量评估与交付一致性
- [x] 5.1 建立最小评估集（spousal/study 各 3-5 条匿名样例）
- [x] 5.2 定义输出一致性校验规则（模板字段、免责声明、来源等级）
- [x] 5.3 增加回归检查流程（提示词/模型变更后必跑）
- [x] 5.4 明确 KG/MCP 实际运行环境与健康检查
- [x] 5.5 适配服务器 HTTP MCP 模式（配置与健康检查）
