{
  "workflow_id": "work_refusal_analysis",
  "name": "Work Permit Refusal Analysis",
  "description": "Analysis of work permit refusal with appeal options and strategy",
  "app_type": "work",
  "version": "1.0.0",
  "stages": [
    {
      "id": "intake",
      "agent": "intake",
      "description": "Extract refusal letter and application documents",
      "required": true,
      "depends_on": [],
      "retry_limit": 2,
      "timeout_seconds": 300
    },
    {
      "id": "detective",
      "agent": "detective",
      "description": "Research case law on officer's stated refusal reasons",
      "required": true,
      "depends_on": ["intake"],
      "retry_limit": 2,
      "timeout_seconds": 600
    },
    {
      "id": "strategist",
      "agent": "strategist",
      "description": "Assess appeal prospects and reapplication strategy",
      "required": true,
      "depends_on": ["detective"],
      "retry_limit": 2,
      "timeout_seconds": 600
    },
    {
      "id": "gatekeeper",
      "agent": "gatekeeper",
      "description": "Identify what led to refusal and compliance issues",
      "required": true,
      "depends_on": ["strategist"],
      "retry_limit": 2,
      "timeout_seconds": 300
    },
    {
      "id": "verifier",
      "agent": "verifier",
      "description": "Verify case law cited in judicial review analysis",
      "required": false,
      "depends_on": ["gatekeeper"],
      "retry_limit": 3,
      "timeout_seconds": 300,
      "tier_availability": ["pro", "ultra"]
    },
    {
      "id": "judge",
      "agent": "judge",
      "description": "Assess judicial review viability (GO/CAUTION/NO-GO)",
      "required": true,
      "depends_on": ["verifier"],
      "retry_limit": 1,
      "timeout_seconds": 300,
      "only_in": ["refusal_analysis", "risk_audit", "initial_assessment", "final_review"]
    },
    {
      "id": "reporter",
      "agent": "reporter",
      "description": "Generate refusal analysis and next steps",
      "required": true,
      "depends_on": ["judge"],
      "retry_limit": 1,
      "timeout_seconds": 300
    }
  ],
  "metadata": {
    "created": "2026-01-27",
    "audit_tier_compatibility": ["guest", "pro", "ultra"],
    "estimated_duration_minutes": 60,
    "description_full": "7-stage workflow for analyzing work permit refusals. Includes research on officer's reasons, appeal viability assessment, judicial review strategy, and next steps for applicant."
  }
}
